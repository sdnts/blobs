---
import Layout from "../layouts/Layout.astro";
import { HeroText } from "../components/HeroText";
import { NewButton } from "../components/NewButton";
---

<Layout>
  <main class="flex justify-center">
    <section class:list={["leading-none", "text-[24vmin] md:text-[18vmin]"]}>
      <div>
        <HeroText title="Airdrop">AIRDOP</HeroText>
        <HeroText title="for">FR</HeroText>
      </div>

      <div class="flex justify-between items-end" data-testid="hero">
        <div>
          <HeroText title="the">THE</HeroText>
          <HeroText title="Web">WE</HeroText>
        </div>

        <section
          class:list={["flex flex-col gap-6", "mb-[2rem]", "font-normal"]}
        >
          <NewButton client:load />

          <a
            href="/tunnel/join"
            class:list={[
              "text-black border-2 border-black",
              "px-6 py-3",
              "rounded-lg select-none",
              "transition-all duration-300 hover:scale-105 hover:shadow-lg active:scale-95 active:shadow-sm",
              "text-2xl md:text-4xl lg:text-3xl text-center",
            ]}
            data-testid="join"
          >
            Receive
          </a>
        </section>
      </div>
    </section>
  </main>

  <script>
    import { toast } from "sonner";

    document.addEventListener("astro:after-swap", () => toast.dismiss());
  </script>

  <script>
    import { animate, stagger, spring } from "motion";

    const motionMediaQuery = window.matchMedia(
      "(prefers-reduced-motion: no-preference)"
    );

    const animateIn = () => {
      if (!motionMediaQuery.matches) return;

      const text = document.querySelectorAll(".hero-text");
      if (text.length === 0) return;

      animate(
        text,
        { transform: "translateY(0)" },
        {
          duration: 0.6,
          delay: stagger(0.05),
          easing: spring({ velocity: 100, mass: 10 }),
        }
      );
    };

    animateIn();
    document.addEventListener("astro:after-swap", () => animateIn());
  </script>
</Layout>
